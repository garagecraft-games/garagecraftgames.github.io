"use strict";(self.webpackChunkgaragecraft_games=self.webpackChunkgaragecraft_games||[]).push([[485],{3035:(e,t,n)=>{n.d(t,{A:()=>s});const s=n.p+"assets/images/guid-57a8bca5c9f4b9e50921249418f7cc2f.png"},3428:(e,t,n)=>{n.d(t,{R:()=>r});var s=n(4164),i=(n(6540),n(4848));const a=[{name:"GitHub",url:"https://github.com/garagecraft-games",svg:(0,i.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("title",{children:"GitHub"}),(0,i.jsx)("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})},{name:"X",url:"https://x.com/grgcrft_games",svg:(0,i.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-label":"X",children:[(0,i.jsx)("title",{children:"X"}),(0,i.jsx)("path",{d:"M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865z",transform:"scale(1.5)"})]})},{name:"BlueSky",url:"https://bsky.app/profile/garagecraft.games",svg:(0,i.jsxs)("svg",{viewBox:"0 0 511.999 452.266",children:[(0,i.jsx)("title",{children:"BlueSky"}),(0,i.jsx)("path",{d:"M110.985 30.442c58.695 44.217 121.837 133.856 145.013 181.961 23.176-48.105 86.322-137.744 145.016-181.961 42.361-31.897 110.985-56.584 110.985 21.96 0 15.681-8.962 131.776-14.223 150.628-18.272 65.516-84.873 82.228-144.112 72.116 103.55 17.68 129.889 76.238 73 134.8-108.04 111.223-155.288-27.905-167.385-63.554-3.489-10.262-2.991-10.498-6.561 0-12.098 35.649-59.342 174.777-167.382 63.554-56.89-58.562-30.551-117.12 72.999-134.8-59.239 10.112-125.84-6.6-144.112-72.116C8.962 184.178 0 68.083 0 52.402c0-78.544 68.633-53.857 110.985-21.96z"})]})},{name:"LinkedIn",url:"https://www.linkedin.com/company/garagecraft-games",svg:(0,i.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("title",{children:"LinkedIn"}),(0,i.jsx)("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})]})},{name:"Twitch",url:"https://twitch.tv/garagecraft_games",svg:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:[(0,i.jsx)("rect",{width:"512",height:"512",rx:"15%",fill:"#48e65e"}),(0,i.jsx)("path",{d:"m115 101-22 56v228h78v42h44l41-42h63l85-85v-199zm260 185-48 48h-78l-42 42v-42h-65v-204h233zm-48-100v85h-30v-85zm-78 0v85h-29v-85z",fill:"#0d0d27"})]})}],r=function(){const e=a.map(({name:e,url:t,svg:n})=>(0,i.jsx)("div",{className:(0,s.A)("col","socialLink"),children:(0,i.jsx)("a",{href:t,target:"_blank",className:(0,s.A)("button button--outline button--primary","btn"),children:(0,i.jsx)("span",{className:"btnIcon",children:n})})},e));return(0,i.jsx)("div",{className:"container socialContainer",children:(0,i.jsx)("div",{className:(0,s.A)("row"),children:e})})}},4801:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>s,toc:()=>c});var s=n(6468),i=n(4848),a=n(8453);n(3428);const r={slug:"helios-engine-foundation",title:"Sundays are for constexpr",tags:["devlog"]},o=void 0,l={authorsImageUrls:[]},c=[{value:"Starting with a Clean Slate: C++20 Modules",id:"starting-with-a-clean-slate-c20-modules",level:3},{value:"The <code>vec3</code> Story: More Than Just Three Floats",id:"the-vec3-story-more-than-just-three-floats",level:3},{value:"The Guid Lesson: Choosing the Right Tool",id:"the-guid-lesson-choosing-the-right-tool",level:3},{value:"What&#39;s Next?",id:"whats-next",level:3}];function h(e){const t={a:"a",code:"code",del:"del",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",section:"section",strong:"strong",sup:"sup",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["For a game engine, the first step isn\u2019t rendering a scene or simulating complex physics - it\u2019s laying the foundational bricks. This weekend, I ",(0,i.jsx)(t.del,{children:"eased"})," dove headfirst into that foundation for my personal C++ engine project, ",(0,i.jsx)(t.em,{children:"Helios"}),", and it was a fantastic journey through the nuances of modern C++ design."]}),"\n",(0,i.jsx)(t.h3,{id:"starting-with-a-clean-slate-c20-modules",children:"Starting with a Clean Slate: C++20 Modules"}),"\n",(0,i.jsxs)(t.p,{children:["From the beginning, I decided to build Helios on a modern footing, which meant embracing C++20 modules. Leaving the legacy of ",(0,i.jsx)(t.code,{children:"#include"})," behind, explicit dependency graphs with ",(0,i.jsx)(t.code,{children:"import"})," and ",(0,i.jsx)(t.code,{children:"export"})," are the goal. Solving a few issues solidified a key lesson: with modules, build scripts are as much a part of your architecture as your C++ code (even though the prospect of a legacy audit makes me a little nervous) ."]}),"\n",(0,i.jsxs)(t.h3,{id:"the-vec3-story-more-than-just-three-floats",children:["The ",(0,i.jsx)(t.code,{children:"vec3"})," Story: More Than Just Three Floats"]}),"\n",(0,i.jsxs)(t.p,{children:["The first real piece of the engine was the humble ",(0,i.jsx)(t.code,{children:"vec3"}),". Sounds simple, right? Yet it became the perfect canvas for exploring modern C++ features. The goal wasn't just to make it work, but to make it efficient, so that hundreds operations in between frames can be run in the shortest time possible."]}),"\n",(0,i.jsxs)(t.p,{children:["I wrapped my head around ",(0,i.jsx)(t.a,{href:"https://en.cppreference.com/w/cpp/language/constexpr.html",children:(0,i.jsx)(t.code,{children:"constexpr"})}),", amongst others, and used it where applicable: constructors, the ",(0,i.jsx)(t.code,{children:"operator[]"}),", and other accessors were all designed to be usable at compile time, which allows for defining constant vectors like world axes or colors that are baked directly into the program, with zero runtime cost",(0,i.jsx)(t.sup,{children:(0,i.jsx)(t.a,{href:"#user-content-fn-static_assert-008eb3",id:"user-content-fnref-static_assert-008eb3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),"."]}),"\n",(0,i.jsx)(t.h3,{id:"the-guid-lesson-choosing-the-right-tool",children:"The Guid Lesson: Choosing the Right Tool"}),"\n",(0,i.jsxs)(t.p,{children:["Next up was a system for unique object identification. My first instinct for the ",(0,i.jsxs)(t.a,{href:"https://github.com/garagecraft-games/helios/blob/main/src/helios/util/Guid.cpp",children:[(0,i.jsx)(t.code,{children:"Guid"})," class"]})," was to hide the implementation details using the ",(0,i.jsx)(t.strong,{children:"Pimpl idiom"})," (",(0,i.jsx)(t.em,{children:"Pointer to Implementation"}),")",(0,i.jsx)(t.sup,{children:(0,i.jsx)(t.a,{href:"#user-content-fn-pimpl-008eb3",id:"user-content-fnref-pimpl-008eb3","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})}),". It\u2019s a classic pattern for reducing compile-time dependencies."]}),"\n",(0,i.jsxs)(t.p,{children:["Well, as much as I like the concept behind the ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Bridge_pattern",children:"Bridge Pattern"})," and its usage in C++, it was completely the wrong tool for this job: Due to the way the memory is allocated for the referenced data structure (additional heap-allocation for every ",(0,i.jsx)(t.code,{children:"Guid"})," that gets created) and due to the fact that a ",(0,i.jsx)(t.a,{href:"https://www.it.uc3m.es/pbasanta/asng/course_notes/pointers_indirection_with_pointers_en.html",children:"pointer indirection"})," for every single ",(0,i.jsx)(t.code,{children:"Guid"})," would be incurred. For a scene graph with many identifiable nodes, this would impose avoidable performance overhead."]}),"\n",(0,i.jsxs)(t.p,{children:["I scrapped the Pimpl (heh!) and rebuilt Guid as a simple, efficient class wrapping a ",(0,i.jsx)(t.code,{children:"uint64_t"}),". It should be as cheap to use as an ",(0,i.jsx)(t.code,{children:"int"})," - benchmarks tba."]}),"\n",(0,i.jsx)("center",{children:(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:n(3035).A+"",width:"1262",height:"1048"})})}),"\n",(0,i.jsx)(t.h3,{id:"whats-next",children:"What's Next?"}),"\n",(0,i.jsx)(t.p,{children:"The foundation is now in place. I'm striving for a small math and utility library before I go back to rendering and OpenGL. The process has been a deep dive into not just how C++ features work, but why they are designed the way they are."}),"\n",(0,i.jsx)(t.p,{children:"The next step is to build on these bricks - to create a scene graph, a Node aggregate, and begin tackling the renderer itself. But I'll do so with the confidence that the code it all rests is solid - and, more important - maintainable."}),"\n",(0,i.jsx)(t.hr,{}),"\n","\n",(0,i.jsxs)(t.section,{"data-footnotes":!0,className:"footnotes",children:[(0,i.jsx)(t.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{id:"user-content-fn-static_assert-008eb3",children:["\n",(0,i.jsxs)(t.p,{children:["It also enables compile-time validation with ",(0,i.jsx)(t.a,{href:"https://en.cppreference.com/w/cpp/language/static_assert.html",children:(0,i.jsx)(t.code,{children:"static_assert"})}),", catching bugs before the code even runs. ",(0,i.jsx)(t.a,{href:"#user-content-fnref-static_assert-008eb3","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,i.jsxs)(t.li,{id:"user-content-fn-pimpl-008eb3",children:["\n",(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Opaque_pointer",children:"https://en.wikipedia.org/wiki/Opaque_pointer"})," (retrieved 17.08.2025) ",(0,i.jsx)(t.a,{href:"#user-content-fnref-pimpl-008eb3","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},6468:e=>{e.exports=JSON.parse('{"permalink":"/devlog/helios-engine-foundation","source":"@site/devlog/2025-08-17-helios-engine-foundation/index.md","title":"Sundays are for constexpr","description":"For a game engine, the first step isn\u2019t rendering a scene or simulating complex physics - it\u2019s laying the foundational bricks. This weekend, I ~eased~ dove headfirst into that foundation for my personal C++ engine project, Helios, and it was a fantastic journey through the nuances of modern C++ design.","date":"2025-08-17T00:00:00.000Z","tags":[{"inline":true,"label":"devlog","permalink":"/devlog/tags/devlog"}],"readingTime":2.75,"hasTruncateMarker":true,"authors":[],"frontMatter":{"slug":"helios-engine-foundation","title":"Sundays are for constexpr","tags":["devlog"]},"unlisted":false,"nextItem":{"title":"Lost in Translation","permalink":"/devlog/lost-in-translation"}}')}}]);