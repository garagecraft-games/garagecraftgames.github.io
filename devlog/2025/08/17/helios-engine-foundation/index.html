<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-devlog" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Sundays are for constexpr | garagecraft.games</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://garagecraft.games/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://garagecraft.games/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://garagecraft.games/devlog/2025/08/17/helios-engine-foundation"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Sundays are for constexpr | garagecraft.games"><meta data-rh="true" name="description" content="For a game engine, the first step isn’t rendering a scene or simulating complex physics - it’s laying the foundational bricks. This weekend, I ~eased~ dove headfirst into that foundation for my personal C++ engine project, Helios, and it was a fantastic journey through the nuances of modern C++ design."><meta data-rh="true" property="og:description" content="For a game engine, the first step isn’t rendering a scene or simulating complex physics - it’s laying the foundational bricks. This weekend, I ~eased~ dove headfirst into that foundation for my personal C++ engine project, Helios, and it was a fantastic journey through the nuances of modern C++ design."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-08-17T00:00:00.000Z"><meta data-rh="true" property="article:tag" content="devlog,helios"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://garagecraft.games/devlog/2025/08/17/helios-engine-foundation"><link data-rh="true" rel="alternate" href="https://garagecraft.games/devlog/2025/08/17/helios-engine-foundation" hreflang="en"><link data-rh="true" rel="alternate" href="https://garagecraft.games/devlog/2025/08/17/helios-engine-foundation" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://garagecraft.games/devlog/2025/08/17/helios-engine-foundation","mainEntityOfPage":"https://garagecraft.games/devlog/2025/08/17/helios-engine-foundation","url":"https://garagecraft.games/devlog/2025/08/17/helios-engine-foundation","headline":"Sundays are for constexpr","name":"Sundays are for constexpr","description":"For a game engine, the first step isn’t rendering a scene or simulating complex physics - it’s laying the foundational bricks. This weekend, I ~eased~ dove headfirst into that foundation for my personal C++ engine project, Helios, and it was a fantastic journey through the nuances of modern C++ design.","datePublished":"2025-08-17T00:00:00.000Z","author":[],"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://garagecraft.games/devlog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/devlog/rss.xml" title="garagecraft.games RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/devlog/atom.xml" title="garagecraft.games Atom Feed"><link rel="stylesheet" href="/assets/css/styles.5f2af3d0.css">
<script src="/assets/js/runtime~main.2076af8b.js" defer="defer"></script>
<script src="/assets/js/main.6312e785.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/home.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/home.svg" alt="Home" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/home.svg" alt="Home" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/helios">helios</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/devlog">devlog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/garagecraft-games" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/devlog/2025/09/05/inbefore-clipspace">Inb4 Clip Space </a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/devlog/2025/09/02/model-matrix-rotations">Model Matrix: Rotations</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/devlog/2025/08/31/establishing-the-transformation-library">Establishing the Transformation Library</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/devlog/2025/08/26/model-matrix-transformations">Model Matrix: Transformations</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/devlog/2025/08/23/cmake-has-entered-the-chat">CMake has entered the chat</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Sundays are for constexpr</h1><div class="container_mt6G margin-vert--md"><time datetime="2025-08-17T00:00:00.000Z">August 17, 2025</time> · <!-- -->3 min read</div></header><div id="__blog-post-container" class="markdown"><p>For a game engine, the first step isn’t rendering a scene or simulating complex physics - it’s laying the foundational bricks. This weekend, I <del>eased</del> dove headfirst into that foundation for my personal C++ engine project, <em>Helios</em>, and it was a fantastic journey through the nuances of modern C++ design.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="starting-with-a-clean-slate-c20-modules">Starting with a Clean Slate: C++20 Modules<a href="#starting-with-a-clean-slate-c20-modules" class="hash-link" aria-label="Direct link to Starting with a Clean Slate: C++20 Modules" title="Direct link to Starting with a Clean Slate: C++20 Modules">​</a></h3>
<p>From the beginning, I decided to build Helios on a modern footing, which meant embracing C++20 modules. Leaving the legacy of <code>#include</code> behind, explicit dependency graphs with <code>import</code> and <code>export</code> are the goal. Solving a few issues solidified a key lesson: with modules, build scripts are as much a part of your architecture as your C++ code (even though the prospect of a legacy audit makes me a little nervous) .</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-vec3-story-more-than-just-three-floats">The <code>vec3</code> Story: More Than Just Three Floats<a href="#the-vec3-story-more-than-just-three-floats" class="hash-link" aria-label="Direct link to the-vec3-story-more-than-just-three-floats" title="Direct link to the-vec3-story-more-than-just-three-floats">​</a></h3>
<p>The first real piece of the engine was the humble <code>vec3</code>. Sounds simple, right? Yet it became the perfect canvas for exploring modern C++ features. The goal wasn&#x27;t just to make it work, but to make it efficient, so that hundreds operations in between frames can be run in the shortest time possible.</p>
<p>I wrapped my head around <a href="https://en.cppreference.com/w/cpp/language/constexpr.html" target="_blank" rel="noopener noreferrer"><code>constexpr</code></a>, amongst others, and used it where applicable: constructors, the <code>operator[]</code>, and other accessors were all designed to be usable at compile time, which allows for defining constant vectors like world axes or colors that are baked directly into the program, with zero runtime cost<sup><a href="#user-content-fn-static_assert-008eb3" id="user-content-fnref-static_assert-008eb3" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-guid-lesson-choosing-the-right-tool">The Guid Lesson: Choosing the Right Tool<a href="#the-guid-lesson-choosing-the-right-tool" class="hash-link" aria-label="Direct link to The Guid Lesson: Choosing the Right Tool" title="Direct link to The Guid Lesson: Choosing the Right Tool">​</a></h3>
<p>Next up was a system for unique object identification. My first instinct for the <a href="https://github.com/garagecraft-games/helios/blob/main/src/helios/util/Guid.cpp" target="_blank" rel="noopener noreferrer"><code>Guid</code> class</a> was to hide the implementation details using the <strong>Pimpl idiom</strong> (<em>Pointer to Implementation</em>)<sup><a href="#user-content-fn-pimpl-008eb3" id="user-content-fnref-pimpl-008eb3" data-footnote-ref="true" aria-describedby="footnote-label">2</a></sup>. It’s a classic pattern for reducing compile-time dependencies.</p>
<p>Well, as much as I like the concept behind the <a href="https://en.wikipedia.org/wiki/Bridge_pattern" target="_blank" rel="noopener noreferrer">Bridge Pattern</a> and its usage in C++, it was completely the wrong tool for this job: Due to the way the memory is allocated for the referenced data structure (additional heap-allocation for every <code>Guid</code> that gets created) and due to the fact that a <a href="https://www.it.uc3m.es/pbasanta/asng/course_notes/pointers_indirection_with_pointers_en.html" target="_blank" rel="noopener noreferrer">pointer indirection</a> for every single <code>Guid</code> would be incurred. For a scene graph with many identifiable nodes, this would impose avoidable performance overhead.</p>
<p>I scrapped the Pimpl (heh!) and rebuilt Guid as a simple, efficient class wrapping a <code>uint64_t</code>. It should be as cheap to use as an <code>int</code> - benchmarks tba.</p>
<center><p><img decoding="async" loading="lazy" src="/assets/images/guid-57a8bca5c9f4b9e50921249418f7cc2f.png" width="1262" height="1048" class="img_ev3q"></p></center>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-next">What&#x27;s Next?<a href="#whats-next" class="hash-link" aria-label="Direct link to What&#x27;s Next?" title="Direct link to What&#x27;s Next?">​</a></h3>
<p>The foundation is now in place. I&#x27;m striving for a small math and utility library before I go back to rendering and OpenGL. The process has been a deep dive into not just how C++ features work, but why they are designed the way they are.</p>
<p>The next step is to build on these bricks - to create a scene graph, a Node aggregate, and begin tackling the renderer itself. But I&#x27;ll do so with the confidence that the code it all rests is solid - and, more important - maintainable.</p>
<hr>
<!-- -->
<section data-footnotes="true" class="footnotes"><h2 class="anchor anchorWithStickyNavbar_LWe7 sr-only" id="footnote-label">Footnotes<a href="#footnote-label" class="hash-link" aria-label="Direct link to Footnotes" title="Direct link to Footnotes">​</a></h2>
<ol>
<li id="user-content-fn-static_assert-008eb3">
<p>It also enables compile-time validation with <a href="https://en.cppreference.com/w/cpp/language/static_assert.html" target="_blank" rel="noopener noreferrer"><code>static_assert</code></a>, catching bugs before the code even runs. <a href="#user-content-fnref-static_assert-008eb3" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-pimpl-008eb3">
<p>See <a href="https://en.wikipedia.org/wiki/Opaque_pointer" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Opaque_pointer</a> (retrieved 17.08.2025) <a href="#user-content-fnref-pimpl-008eb3" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/devlog/tags/devlog">devlog</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/devlog/tags/helios">helios</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/devlog/2025/08/23/cmake-has-entered-the-chat"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">CMake has entered the chat</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/devlog/2025/08/16/lost-in-translation"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">Lost in Translation</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#starting-with-a-clean-slate-c20-modules" class="table-of-contents__link toc-highlight">Starting with a Clean Slate: C++20 Modules</a></li><li><a href="#the-vec3-story-more-than-just-three-floats" class="table-of-contents__link toc-highlight">The <code>vec3</code> Story: More Than Just Three Floats</a></li><li><a href="#the-guid-lesson-choosing-the-right-tool" class="table-of-contents__link toc-highlight">The Guid Lesson: Choosing the Right Tool</a></li><li><a href="#whats-next" class="table-of-contents__link toc-highlight">What&#39;s Next?</a></li></ul></div></div></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">copyright © 2025 <a href="#">GarageCraft Games</a> / <a href="https://garagecraft.games">Thorsten Suckow-Homberg</a>.</div></div></div></footer></div>
</body>
</html>